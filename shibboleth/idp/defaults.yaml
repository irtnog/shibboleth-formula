shibboleth:
  idp:
    version: 3.2.1
    master_site: http://shibboleth.net/downloads/identity-provider
    suffix: .tar.gz
    source_hash:
      .tar.gz: sha256=231d100c81f3039f08782cc46067718b2fedf2d988fccc543250fb1813a2bc20
      .zip: sha256=9d509e4c54cba5de8b63fba9a59c90138f289f8126ab7849f8a42392432a1317
    jstl_version: 1.2
    jstl_source_template:
      https://build.shibboleth.net/nexus/service/local/repositories/thirdparty/content/javax/servlet/jstl/%s/jstl-%s.jar
    jstl_source_hash:
      sha256=c6273119354a41522877e663582041012b22f8204fe72bba337ed84c7e649b0a
    packages: []
    prefix: /opt/shibboleth-idp
    user: root                  # assumed to already exist; use
                                # users-formula for account creation
                                # if necessary
    group: 0                    # 'root' (SVR4) or 'wheel' (BSD) is
                                # unportable

    ## The following must be set by the system operator.
    hostname: ''
    entity_id: ''
    scope: ''
    keystore_password: ''
    sealer_password: ''
    backchannel_certificate: ''
    backchannel_key: ''
    encryption_certificate: ''
    encryption_key: ''
    signing_certificate: ''
    signing_key: ''

    ## idp.properties
    cookie_secure: ~
    cookie_http_only: ~
    cookie_domain: ~
    cookie_path: ~
    cookie_max_age: ~
    security_config: ~
    signing_config: ~
    trust_signatures: ~
    trust_certificates: ~
    encryption_optional: ~
    storage_cleanup_interval: ~
    storage_html_localstorage: ~
    errors_detailed: ~
    errors_signed: ~
    errors_excluded_exceptions: ~
    errors_exception_mappings: ~
    errors_default_view: ~
    session_enabled: ~
    session_storage_service: ~
    session_id_size: ~
    session_consistent_address: ~
    session_timeout: ~
    session_slop: ~
    session_mask_storage_failure: ~
    session_track_sp_session: ~
    session_secondary_service_index: ~
    session_default_sp_lifetime: ~
    authn_flows: ~
    authn_flows_initial: ~
    authn_resolve_attribute: ~
    authn_default_lifetime: ~
    authn_default_timeout: ~
    authn_favor_sso: ~
    authn_identity_switch_is_error: ~
    consent_storage_service: ~
    consent_user_storage_key: ~
    consent_user_storage_key_attribute: ~
    consent_allow_do_not_remember: ~
    consent_allow_global: ~
    consent_allow_per_attribute: ~
    consent_compare_values: ~
    consent_max_stored_records: ~
    consent_expanded_max_stored_records: ~
    consent_storage_record_lifetime: ~
    logout_elaboration: ~
    logout_authenticated: ~
    policy_message_lifetime: ~
    policy_clock_skew: ~
    replay_cache_storage_service: ~
    artifact_enabled: ~
    artifact_secure_channel: ~
    artifact_endpoint_index: ~
    artifact_storage_service: ~
    status_access_policy: ~
    resolver_test_access_policy: ~
    reload_access_policy: ~
    ui_fallback_languages: ~
    cas_storage_service: ~
    cas_service_registry_class: ~
    profile_expose_request_context: ~
    fticks_federation: ~
    fticks_algorithm: ~
    fticks_salt: ~

    ## ldap.properties
    ldap_authenticator: ~
    ldap_url: ~
    ldap_use_starttls: ~
    ldap_use_ssl: ~
    ldap_connect_timeout: ~
    ldap_ssl_config: ~
    ldap_return_attributes: ~
    ldap_base_dn: ~
    ldap_subtree_search: ~
    ldap_user_filter: ~
    ldap_bind_dn: ~
    ldap_bind_credential: ~
    ldap_dn_format: ~
    attribute_resolver_ldap_search_filter: ~
    attribute_resolver_ldap_return_attributes: ~
    ldap_pool_size_minimum: ~
    ldap_pool_size_maximum: ~
    ldap_pool_validate_on_checkout: ~
    ldap_pool_validate_periodically: ~
    ldap_pool_validate_period: ~
    ldap_pool_prune_period: ~
    ldap_pool_idle_time: ~
    ldap_pool_block_wait_time: ~
    ldap_pool_fail_fast_initialize: ~

    ## metadata-providers.xml
    metadata_providers: []

    ## attribute-resolver.xml
    resolver_attribute_definitions:
      - id: eduPersonPrincipalName
        type: ad:Scoped
        scope: '%{idp.scope}'
        source_attribute_id: uid
        dependency: uid
        attribute_encoders:
          - type: enc:SAML1ScopedString
            name: urn:mace:dir:attribute-def:eduPersonPrincipalName
            encode_type: False
          - type: enc:SAML2ScopedString
            name: urn:oid:1.3.6.1.4.1.5923.1.1.1.6
            friendly_name: eduPersonPrincipalName
            encode_type: False
      - id: uid
        type: ad:PrincipalName
        attribute_encoders:
          - type: enc:SAML1String
            name: urn:mace:dir:attribute-def:uid
            encode_type: False
          - type: enc:SAML2String
            name: urn:oid:0.9.2342.19200300.100.1.1
            friendly_name: uid
            encode_type: False
      - id: mail
        type: ad:Template
        dependency: uid
        attribute_encoders:
          - type: enc:SAML1String
            name: urn:mace:dir:attribute-def:mail
            encode_type: False
          - type: enc:SAML2String
            name: urn:oid:0.9.2342.19200300.100.1.3
            friendly_name: mail
            encode_type: False
        template:
          ${uid}@example.org
        source_attribute: uid   # NB: different than source_attribute_id!
      - id: eduPersonScopedAffiliation
        type: ad:Scoped
        scope: '%{idp.scope}'
        source_attribute_id: affiliation
        dependency: staticAttributes # NB: data connector reference
        attribute_encoders:
          - type: enc:SAML1ScopedString
            name: urn:mace:dir:attribute-def:eduPersonScopedAffiliation
            encode_type: False
          - type: enc:SAML2ScopedString
            name: urn:oid:1.3.6.1.4.1.5923.1.1.1.9
            friendly_name: eduPersonScopedAffiliation
            encode_type: False
    resolver_data_connectors:
      - id: StaticAttributes
        type: dc:Static
        attributes:
          - id: affiliation
            value: member
